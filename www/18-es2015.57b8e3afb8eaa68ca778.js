(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"19mU":function(n,t,e){"use strict";e.r(t),e.d(t,"MenuPageModule",(function(){return g}));var o=e("ofXK"),i=e("3Pt+"),b=e("TEn/"),s=e("tyNb"),c=e("mrSG"),r=e("fXoL"),l=e("tnAE"),u=e("e8h1");function a(n,t){if(1&n){const n=r.Nb();r.Mb(0,"div",14),r.Mb(1,"ion-row",15),r.Mb(2,"ion-col"),r.Mb(3,"ion-label"),r.hc(4,"Units"),r.Lb(),r.Lb(),r.Mb(5,"ion-col"),r.Mb(6,"ion-label"),r.hc(7,"Quantity"),r.Lb(),r.Lb(),r.Mb(8,"ion-col"),r.Mb(9,"ion-label"),r.hc(10,"Buy"),r.Lb(),r.Lb(),r.Lb(),r.Kb(11,"br"),r.Mb(12,"ion-row"),r.Mb(13,"ion-col"),r.Mb(14,"ion-label"),r.hc(15,"Assault"),r.Lb(),r.Lb(),r.Mb(16,"ion-col"),r.Mb(17,"ion-label"),r.hc(18),r.Lb(),r.Lb(),r.Mb(19,"ion-col"),r.Mb(20,"ion-button",1),r.Ub("click",(function(){return r.dc(n),r.Yb().buyAssault()})),r.hc(21,"+"),r.Lb(),r.hc(22,"\xa0\xa0"),r.Mb(23,"ion-label"),r.hc(24),r.Lb(),r.Lb(),r.Lb(),r.Kb(25,"br"),r.Mb(26,"ion-row"),r.Mb(27,"ion-col"),r.Mb(28,"ion-label"),r.hc(29,"Tanks"),r.Lb(),r.Lb(),r.Mb(30,"ion-col"),r.Mb(31,"ion-label"),r.hc(32),r.Lb(),r.Lb(),r.Mb(33,"ion-col"),r.Mb(34,"ion-button",16),r.Ub("click",(function(){return r.dc(n),r.Yb().buyTank()})),r.hc(35,"+"),r.Lb(),r.hc(36,"\xa0\xa0"),r.Mb(37,"ion-label"),r.hc(38),r.Lb(),r.Lb(),r.Lb(),r.Kb(39,"br"),r.Mb(40,"ion-row"),r.Mb(41,"ion-col"),r.Mb(42,"ion-label"),r.hc(43,"Engineer"),r.Lb(),r.Lb(),r.Mb(44,"ion-col"),r.Mb(45,"ion-label"),r.hc(46),r.Lb(),r.Lb(),r.Mb(47,"ion-col"),r.Mb(48,"ion-button",1),r.Ub("click",(function(){return r.dc(n),r.Yb().buyEngineer()})),r.hc(49,"+"),r.Lb(),r.hc(50,"\xa0\xa0"),r.Mb(51,"ion-label"),r.hc(52),r.Lb(),r.Lb(),r.Lb(),r.Mb(53,"ion-row"),r.Mb(54,"ion-col"),r.Mb(55,"ion-button",1),r.Ub("click",(function(){return r.dc(n),r.Yb().alertToBuy()})),r.hc(56,"Comprar"),r.Lb(),r.Lb(),r.Lb(),r.Lb()}if(2&n){const n=r.Yb();r.zb(18),r.ic(n.myAssault),r.zb(6),r.ic(n.assaultToBuy),r.zb(8),r.ic(n.myTank),r.zb(6),r.ic(n.tankToBuy),r.zb(8),r.ic(n.myEngineer),r.zb(6),r.ic(n.engineerToBuy)}}function h(n,t){if(1&n){const n=r.Nb();r.Mb(0,"div",14),r.Mb(1,"ion-row",15),r.Mb(2,"ion-col"),r.Mb(3,"ion-label"),r.hc(4,"Units"),r.Lb(),r.Lb(),r.Mb(5,"ion-col"),r.Mb(6,"ion-label"),r.hc(7,"Quantity"),r.Lb(),r.Lb(),r.Mb(8,"ion-col"),r.Mb(9,"ion-label"),r.hc(10,"Buy"),r.Lb(),r.Lb(),r.Lb(),r.Kb(11,"br"),r.Mb(12,"ion-row"),r.Mb(13,"ion-col"),r.Mb(14,"ion-label"),r.hc(15,"Bunkers"),r.Lb(),r.Lb(),r.Mb(16,"ion-col"),r.Mb(17,"ion-label"),r.hc(18),r.Lb(),r.Lb(),r.Mb(19,"ion-col"),r.Mb(20,"ion-button",1),r.Ub("click",(function(){return r.dc(n),r.Yb().buyBunker()})),r.hc(21,"+"),r.Lb(),r.hc(22,"\xa0\xa0"),r.Mb(23,"ion-label"),r.hc(24),r.Lb(),r.Lb(),r.Lb(),r.Mb(25,"ion-row"),r.Mb(26,"ion-col"),r.Mb(27,"ion-button",1),r.Ub("click",(function(){return r.dc(n),r.Yb().alertToBuy()})),r.hc(28,"Comprar"),r.Lb(),r.Lb(),r.Lb(),r.Lb()}if(2&n){const n=r.Yb();r.zb(18),r.ic(n.myBunker),r.zb(6),r.ic(n.bunkerToBuy)}}let M=(()=>{class n{constructor(n,t,e,o,i){this.menu=n,this.router=t,this.rest=e,this.storage=o,this.alertController=i,this.offense=!0,this.defense=!1,this.actual="Offense",this.countdown=1,this.tankToBuy=0,this.engineerToBuy=0,this.assaultToBuy=0,this.bunkerToBuy=0,this.timer=60,this.m=1,this.pages=[{title:"ranking",url:"/menu/ranking"},{title:"connect",url:"/menu/connect"}],this.selectedPath="",this.start(),this.showData()}ngOnInit(){return Object(c.a)(this,void 0,void 0,(function*(){this.offense=!0}))}showData(){return Object(c.a)(this,void 0,void 0,(function*(){null==(yield this.rest.getCurrentUser())?this.goOut():(this.username=yield this.rest.getCurrentUser(),this.rest.getUserData(this.username).subscribe(n=>{this.myMoney=n[0].resources.money,this.myPeople=n[0].resources.people,this.myOil=n[0].resources.oil,this.myBunker=n[0].buildings.bunker,this.myAssault=n[0].army.assault,this.myEngineer=n[0].army.engineer,this.myTank=n[0].army.tank}))}))}showOffense(){this.defense=!1,this.offense=!0,this.actual="Offense"}showDefense(){this.offense=!1,this.defense=!0,this.actual="Defense"}openEnd(){this.menu.close("start"),this.menu.enable(!0,"start"),this.menu.open("start"),this.menu.close("start")}goToRanking(){this.router.navigate(["/ranking"])}goToSettings(){this.router.navigate(["/connect"])}goToMenu(){this.router.navigate(["/menu"])}goOut(){return Object(c.a)(this,void 0,void 0,(function*(){this.logout=yield this.rest.logout(),this.router.navigate([""])}))}start(){setInterval((function(){this.timer--,0===this.timer&&(this.timer=60,this.m-=1),0===this.m&&(this.timer=60,this.m=1,this.showData())}).bind(this),1e3)}buyTank(){this.tankToBuy++}buyEngineer(){this.engineerToBuy++}buyBunker(){this.bunkerToBuy++}buyAssault(){this.assaultToBuy++}buy(){this.rest.buyUnits({army:{assault:this.assaultToBuy,engineer:this.engineerToBuy,tank:this.tankToBuy},buildings:{bunker:this.tankToBuy}}).subscribe(n=>{'{"402":"Non-sufficient funds"}'==JSON.stringify(n)?this.presentAlert():(this.myMoney=n[0].resources.money,this.myPeople=n[0].resources.people,this.myOil=n[0].resources.oli,this.myBunker=n[0].buildings.bunker,this.myAssault=n[0].army.assault,this.myEngineer=n[0].army.engineer,this.myTank=n[0].army.tank,this.tankToBuy=0,this.assaultToBuy=0,this.bunkerToBuy=0,this.engineerToBuy=0)})}presentAlert(){return Object(c.a)(this,void 0,void 0,(function*(){const n=yield this.alertController.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Non-sufficient funds",message:"",buttons:["OK"]});yield n.present()}))}alertToBuy(){return Object(c.a)(this,void 0,void 0,(function*(){const n=yield this.alertController.create({cssClass:"my-custom-class",header:"Are you sure to buy : ",message:"<strong><ion-item>Tanks: "+this.tankToBuy+"</ion-item><ion-item>Engineers: "+this.engineerToBuy+"</ion-item><ion-item>Assault: "+this.assaultToBuy+"</ion-item><ion-item>Bunkers: "+this.bunkerToBuy+" </ion-item></strong>",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:n=>{console.log("Confirm Cancel: blah")}},{text:"Okay",handler:()=>{this.buy()}}]});yield n.present()}))}}return n.\u0275fac=function(t){return new(t||n)(r.Jb(b.x),r.Jb(s.f),r.Jb(l.a),r.Jb(u.b),r.Jb(b.a))},n.\u0275cmp=r.Db({type:n,selectors:[["app-menu"]],decls:66,vars:8,consts:[["id","main"],[3,"click"],["name","menu"],["side","start","contentId","main"],["color","#e20d0d"],[2,"color","#e20d0d"],[1,"title"],[1,"content2"],["id","countdown"],["id","countdown-number"],["r","18","cx","20","cy","20"],["id","myOil"],[1,"content3"],["class","content4",4,"ngIf"],[1,"content4"],[2,"background-color","#1f1f1f","color","rgba(245, 245, 245, 0.973)"],[1,"button",3,"click"]],template:function(n,t){1&n&&(r.Kb(0,"ion-router-outlet",0),r.Mb(1,"ion-header"),r.Mb(2,"ion-toolbar"),r.Mb(3,"ion-button",1),r.Ub("click",(function(){return t.openEnd()})),r.Kb(4,"ion-icon",2),r.Lb(),r.Lb(),r.Lb(),r.Mb(5,"ion-content"),r.Mb(6,"ion-menu",3),r.Mb(7,"ion-header"),r.Mb(8,"ion-toolbar",4),r.Mb(9,"ion-title",5),r.hc(10,"Menu"),r.Lb(),r.Lb(),r.Lb(),r.Mb(11,"ion-content"),r.Mb(12,"ion-list"),r.Mb(13,"ion-item",1),r.Ub("click",(function(){return t.goToMenu()})),r.hc(14,"Profile"),r.Lb(),r.Mb(15,"ion-item",1),r.Ub("click",(function(){return t.goToRanking()})),r.hc(16,"Ranking"),r.Lb(),r.Mb(17,"ion-item",1),r.Ub("click",(function(){return t.goToSettings()})),r.hc(18,"Settings"),r.Lb(),r.Mb(19,"ion-item",1),r.Ub("click",(function(){return t.goOut()})),r.hc(20,"Logout"),r.Lb(),r.Mb(21,"ion-item",1),r.Ub("click",(function(){return t.openEnd()})),r.hc(22,"Close"),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Mb(23,"h1",6),r.hc(24),r.Lb(),r.Mb(25,"div",7),r.Mb(26,"div",8),r.Mb(27,"div",9),r.hc(28),r.Lb(),r.Xb(),r.Mb(29,"svg"),r.Kb(30,"circle",10),r.Lb(),r.Lb(),r.Wb(),r.Mb(31,"ion-row"),r.Mb(32,"ion-col"),r.Mb(33,"ion-label"),r.hc(34,"Oil"),r.Lb(),r.Lb(),r.Mb(35,"ion-col"),r.Mb(36,"ion-label",11),r.hc(37),r.Lb(),r.Lb(),r.Lb(),r.Mb(38,"ion-row"),r.Mb(39,"ion-col"),r.Mb(40,"ion-label"),r.hc(41,"Money"),r.Lb(),r.Lb(),r.Mb(42,"ion-col"),r.Mb(43,"ion-label"),r.hc(44),r.Lb(),r.Lb(),r.Lb(),r.Mb(45,"ion-row"),r.Mb(46,"ion-col"),r.Mb(47,"ion-label"),r.hc(48,"People"),r.Lb(),r.Lb(),r.Mb(49,"ion-col"),r.Mb(50,"ion-label"),r.hc(51),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Mb(52,"div",12),r.Mb(53,"ion-row"),r.Mb(54,"ion-col"),r.Mb(55,"ion-label"),r.hc(56),r.Lb(),r.Lb(),r.Lb(),r.Mb(57,"ion-row"),r.Mb(58,"ion-col"),r.Mb(59,"ion-button",1),r.Ub("click",(function(){return t.showDefense()})),r.hc(60,"Defense"),r.Lb(),r.Lb(),r.Mb(61,"ion-col"),r.Mb(62,"ion-button",1),r.Ub("click",(function(){return t.showOffense()})),r.hc(63,"Offense"),r.Lb(),r.Lb(),r.Lb(),r.gc(64,a,57,6,"div",13),r.gc(65,h,29,2,"div",13),r.Lb(),r.Lb()),2&n&&(r.zb(24),r.ic(t.username),r.zb(4),r.ic(t.timer),r.zb(9),r.ic(t.myOil),r.zb(7),r.ic(t.myMoney),r.zb(7),r.ic(t.myPeople),r.zb(5),r.ic(t.actual),r.zb(8),r.bc("ngIf",t.offense),r.zb(1),r.bc("ngIf",t.defense))},directives:[b.n,b.f,b.u,b.c,b.g,b.e,b.m,b.t,b.l,b.j,b.o,b.d,b.k,o.i],styles:[".my-custom-menu[_ngcontent-%COMP%]{--width:500px}.title[_ngcontent-%COMP%]{text-align:center;margin-top:2%;color:#fff}body[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#333}#countdown[_ngcontent-%COMP%]{position:relative;margin:10px auto auto;height:40px;width:40px;text-align:center}#countdown-number[_ngcontent-%COMP%]{color:#fff;display:inline-block;line-height:40px}svg[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:40px;height:40px;transform:rotateY(-180deg) rotate(-90deg)}svg[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke-dasharray:113px;stroke-dashoffset:0px;stroke-linecap:round;stroke-width:2px;stroke:#fff;fill:none}@-webkit-keyframes countdown{0%{stroke-dashoffset:0px}to{stroke-dashoffset:113px}}@keyframes countdown{0%{stroke-dashoffset:0px}to{stroke-dashoffset:113px}}"]}),n})();var f=e("zpKS"),m=e("2ELU"),y=e("9fo7");const L=[{path:"",component:M,children:[{path:"/register",component:e("b0Bx").a},{path:"/ranking",component:y.a},{path:"/connect",component:m.a},{path:"/home",component:f.a}]},{path:"",redirectTo:"/menu"}];let d=(()=>{class n{}return n.\u0275mod=r.Hb({type:n}),n.\u0275inj=r.Gb({factory:function(t){return new(t||n)},imports:[[s.h.forChild(L)],s.h]}),n})(),g=(()=>{class n{}return n.\u0275mod=r.Hb({type:n}),n.\u0275inj=r.Gb({factory:function(t){return new(t||n)},imports:[[o.b,i.a,b.v,d]]}),n})()}}]);