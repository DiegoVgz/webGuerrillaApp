function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{tnAE:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("mrSG"),a=n("tk/3"),i=n("2Vo4"),o=n("LRne"),u=n("lJxs"),s=n("JIr8"),c=n("fXoL"),h=n("e8h1"),l={headers:new a.c({"Content-Type":"application/json"})},f=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.http=t,this.storage=n,this.username=new i.a("error"),this.currentUsername=this.username.asObservable(),this.enemy=new i.a("error"),this.currentEnemy=this.enemy.asObservable(),this.endPoint=new i.a("https://guerrilla-api-b78225.herokuapp.com/"),this.currentendPoint=this.endPoint.asObservable()}return _createClass(e,[{key:"setUser",value:function(e){this.username.next(e),this.storage.set("name",e)}},{key:"setEnemy",value:function(e){this.username.next(e),this.storage.set("enemy",e)}},{key:"setEndPoint",value:function(e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){n.endPoint.next(e),t(e)})));case 1:case"end":return t.stop()}}),t)})))}},{key:"extractData",value:function(e){return e||{}}},{key:"getCurrentUser",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.storage.get("name").then((function(n){t.username.next(n),e(n)}))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"getCurrentEnemy",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.storage.get("enemy").then((function(n){t.enemy.next(n),e(n)}))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"logout",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.storage.remove("name"),t.username.next(""),e("ha cerrado session")})));case 1:case"end":return e.stop()}}),e)})))}},{key:"login",value:function(e){var t;return this.currentendPoint.subscribe((function(e){return t=e})),this.http.post(t+"guerrilla/"+e.name,e,l).pipe(Object(u.a)(this.extractData),Object(s.a)(this.handleError("login")))}},{key:"getUserData",value:function(e){var t;return this.currentendPoint.subscribe((function(e){return t=e})),this.http.get(t+"guerrilla/"+e,l).pipe(Object(u.a)(this.extractData),Object(s.a)(this.handleError("getData")))}},{key:"buyUnits",value:function(e){var t,n;return console.log(e),this.currentUsername.subscribe((function(e){return n=e})),this.currentendPoint.subscribe((function(e){return t=e})),this.http.put(t+"guerrilla/"+n+"/units",e,l).pipe(Object(u.a)(this.extractData),Object(s.a)(this.handleError("buyUnits")))}},{key:"attack",value:function(e,t){var n;return this.currentendPoint.subscribe((function(e){return n=e})),this.http.post(n+"guerrilla/attack/"+t+"/?guerrillaSrc="+e,l).pipe(Object(u.a)(this.extractData),Object(s.a)(this.handleError("attack")))}},{key:"getRanking",value:function(e,t,n){var r;return this.currentendPoint.subscribe((function(e){return r=e})),this.http.get(r+"guerrilla?name="+e+"&email="+t+"&faction="+n,l).pipe(Object(u.a)(this.extractData),Object(s.a)(this.handleError("ranking")))}},{key:"handleError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation",t=arguments.length>1?arguments[1]:void 0;return function(n){return console.error(n),console.log("".concat(e," failed: ").concat(n.message)),Object(o.a)(t)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Qb(a.a),c.Qb(h.b))},e.\u0275prov=c.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},yXIz:function(e,t,n){"use strict";n.r(t),n.d(t,"ConnectPageModule",(function(){return p}));var r,a,i=n("ofXK"),o=n("3Pt+"),u=n("TEn/"),s=n("tyNb"),c=n("2ELU"),h=n("fXoL"),l=[{path:"",component:c.a}],f=((a=function e(){_classCallCheck(this,e)}).\u0275mod=h.Hb({type:a}),a.\u0275inj=h.Gb({factory:function(e){return new(e||a)},imports:[[s.h.forChild(l)],s.h]}),a),p=((r=function e(){_classCallCheck(this,e)}).\u0275mod=h.Hb({type:r}),r.\u0275inj=h.Gb({factory:function(e){return new(e||r)},imports:[[i.b,o.a,u.w,f]]}),r)}}]);